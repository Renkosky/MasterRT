---
name: MRI
menu: MRI
route: /
order: 1
---

# MRI

[![NPM version](https://img.shields.io/npm/v/masterrt.svg?style=flat)](https://npmjs.org/package/masterrt)

SIA DASHBOARD 前端开发环境

多项目, 组装式, 约定式架构

### 多项目(主题）

在MRI架构下，多项目(theme)是一种常态；

每个项目(主题) 通过不同的配置，可以单独开发，部署等

### 组装式

在MRI下，基本单位是Component, 又称组件；

与React的组件即路由高度重合；

一个组件就是一个路由；

通过 theme.routes 配置将 component 和 theme 桥接起来，构成一个项目的主体部分；

### 约定性架构

通过一定的约定, 可以提高开发效率，降低系统的复杂度以及出错率；

## 目录

```
 + mri/
    // mock
    + mock/
        // mock api setting
        - user.js
        ...

    // webpack public
    // 存放一些静态资源和国际化文件
    + public
        ...

    // dva model
    + model/
        ...

    // 源文件
    + src/
        // component 存放文件路径
        // 可使用cli命令生成 mri component componentName
        + components/
            // 某个component
            + abc-def/
                // component 主文件
                - abc-def.tsx
                // component 样式文件
                - abc-def.less
                // index.ts 索引文件
                - index.ts
        // widget小部件
        // component的组成部分
        // 可使用cli命令生成 mri component widgetName --widget
        + widgets/
            // 某个 widget
            + abc-def
                // widget 主文件
                - abc-lgh.tsx
                // widget 样式文件
                - abc-lgh.less
                // index.ts 索引文件
                - index.ts
        // 相对公共资源文件
        + common/
            // service 服务
            + services/
                // index 索引文件，便于调用(MRI-CLI自动生成)
                // 可使用cli命令生成 mri index
                - index.ts
                - ${theme1}.service.ts
                - ${theme2}.service.ts
                ...
            // 常量文件
            + const/
                // index 索引文件，便于调用(MRI-CLI自动生成)
                // 可使用cli命令生成 mri index
                - index.ts
                // 对应的cosnt interface(MRI-CLI自动生成）
                // 可使用cli命令生成 mri interface
                + interface-mri/
                    -  ${theme1}.const.d.ts
                    -  ${theme1}.const.d.ts
                    ...
                - ${theme1}.const.ts
                - ${theme2}.const.ts
                ...
            // 布局文件
            + layouts
                // 一个叫做a风格的布局模式
                // 可使用cli命令生成 mri component layoutName --layout
                + a-layout
                    - a-layout.tsx
                    - a-layout.less
                    - index.ts

      // 主题(项目)
      + theme/
        // 全局路由守卫
        - route-guard.tsx
        // theme 主控器
        - theme.mri.ts

        // 各theme主文件
        // 可使用cli命令生成 mri theme themeName
        + ${theme}/
            // 常见开发三种环境的配置文件
            + env/
                - ${theme}-dev-cont.ts
                - ${theme}-test-cont.ts
                - ${theme}-prod-cont.ts

            // umirc.js, mrirc.js 的配置信息
            - ${theme}-config.js
            // dva 的启动文件
            - ${theme}-dva.ts
            // 单theme的路由守卫，是全局路由守卫的补充
            - ${theme}-route-guard.ts
            // ${theme} 路由配置文件
            - ${theme}-routes.ts
            // umijs 和 mri-cli 的相关配置信息
            - ${theme}-umi.js

```

## Features

* 使用 [umi](https://github.com/umijs/umi)，作为MRI的基本框架；完美支持umi的各种特性
* 使用 mri-cli 辅助开发项目
* 默认使用 MasterRT, Antd
* 基于RESTFul (MrResource)
* 推荐使用 TypeScript，不会对非ts做特殊优化

## Getting Start

``` bash

// 安装 mri-cli
$ yarn global add mri-cli

// 新建环境
$ mri init myapp

// 启动主题
$ mri dev mytheme

// 构建测试环境的主题（配置环境变量，只供测试时使用）
$ mri build mytheme

// 构建生产环境的主题
$ mri prod mytheme

```

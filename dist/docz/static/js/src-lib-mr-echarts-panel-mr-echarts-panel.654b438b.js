(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"./src/lib/assets/styles/mr-echarts-panel.less":function(e,t,n){},"./src/lib/mr-echarts-panel/mr-echarts-panel.mdx":function(e,t,n){"use strict";n.r(t);var a=n("./node_modules/react/index.js"),r=n.n(a),o=n("./node_modules/@mdx-js/tag/dist/index.js"),l=n("./node_modules/docz/dist/index.m.js"),i=n("./src/lib/mr-echarts/mr-echarts.component.tsx"),s=n("./src/lib/mr-echarts/mr-echarts.services.ts"),c=n("./src/lib/mr-common/mr.services.ts"),u=n("./node_modules/lodash/lodash.js"),p=n("./node_modules/mzmu/index.js");function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,f(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,a["Component"]),n=t,(r=[{key:"render",value:function(){var e=this.props.dataView;return a.createElement("section",{className:"mr-echarts-dataView"},a.createElement("table",null,a.createElement("tbody",null,e.map(function(e,t){return a.createElement("tr",{key:t},e.map(function(e,t){return a.createElement("td",{key:t},p.format(e)||"-")}))}))))}}])&&m(n.prototype,r),o&&m(n,o),t}();try{g.displayName="MrEchartsDataView",g.__docgenInfo={description:"",displayName:"MrEchartsDataView",props:{dataView:{defaultValue:null,description:"",name:"dataView",required:!0,type:{name:"any[]"}}}},"undefined"!==typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/mr-echarts-panel/mr-echarts-dataView.component.tsx#MrEchartsDataView"]={docgenInfo:g.__docgenInfo,name:"MrEchartsDataView",path:"src/lib/mr-echarts-panel/mr-echarts-dataView.component.tsx#MrEchartsDataView"})}catch(e){}var b=n("./node_modules/classnames/index.js"),w=n.n(b),E=(n("./src/lib/assets/styles/mr-echarts-panel.less"),n("./src/lib/mr-icon/mr-icon.component.tsx")),v=n("./src/lib/mr-panel/mr-panel.component.tsx"),S=n("./src/lib/mr-req/mr-req.component.tsx");function V(e){return(V="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function O(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function T(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _(e,t){return!t||"object"!==V(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=_(this,(e=k(t)).call.apply(e,[this].concat(r)))).state={fullScreen:!1,xyExchange:!1,xAxisShowAll:!1,legendShow:!1,dataView:!1,lineBarExchange:!1,setting:s.a.serialize(n.props.setting)},n._dataView=[],n.typeTools={line:["download","dataView","xyExchange","lineBarExchange","xAxisShowAll","legendShow","reload","fullScreen"],bar:["download","dataView","xyExchange","lineBarExchange","xAxisShowAll","legendShow","reload","fullScreen"],pie:["download","dataView","legendShow","reload","fullScreen"],wordCloud:["download","dataView","reload","fullScreen"],map:["download","dataView","reload","fullScreen"],gauge:["download","dataView","legendShow","reload","fullScreen"],radar:["download","dataView","legendShow","reload","fullScreen"],scatter:["download","dataView","legendShow","reload","fullScreen"],treemap:["download","dataView","reload","fullScreen"]},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,a["Component"]),n=t,(r=[{key:"icons",value:function(){var e=this.state,t=e.fullScreen,n=e.xyExchange,r=e.xAxisShowAll,o=e.legendShow,l=e.dataView,i=e.lineBarExchange;return{download:a.createElement(E.a,{family:"mricon",type:"xiazai",onClick:this.download}),dataView:a.createElement(E.a,{family:"mricon",type:"table",onClick:this.dataView.bind(this),className:w()({selected:l})}),xyExchange:a.createElement(E.a,{family:"mricon",type:"rotate",onClick:this.toolSetFn.bind(this,"xyExchange",!0),className:w()({selected:n})}),lineBarExchange:a.createElement(E.a,{family:"mricon",type:"bar",onClick:this.toolSetFn.bind(this,"lineBarExchange",!0),className:w()({selected:i})}),xAxisShowAll:a.createElement(E.a,{family:"mricon",type:"liebiaodanchu",onClick:this.toolSetFn.bind(this,"xAxisShowAll",!0),className:w()({selected:r})}),legendShow:a.createElement(E.a,{family:"mricon",type:"yincang",onClick:this.toolSetFn.bind(this,"legendShow",!0),className:w()({selected:o})}),reload:a.createElement(E.a,{family:"mricon",type:"shuaxin",onClick:this.reload.bind(this)}),fullScreen:a.createElement(E.a,{family:"mricon",type:t?"suoxiao":"fangda",onClick:this.fullScreen.bind(this),className:w()({selected:t})})}}},{key:"tools",value:function(){var e=this.props,t=e.chartTypes,n=e.omitTools,r=e.showToolbar,o=M(t.split("::"),1)[0],l=this.icons(),i=this.typeTools[o];return"hide"===r?null:(p.run(n,function(){"__all__"===n?i=[]:p.each(n,function(e){u.remove(i,function(t){return t===e})})}),a.createElement("div",{className:"mr-echarts-panel-tools"},p.map(i,function(e){return a.createElement(a.Fragment,{key:e},l[e])})))}},{key:"toolSetFn",value:function(e,t){var n,a=this.state[e],r="@@".concat(e),o=this.state.setting,l=void 0===o?[]:o;(a=!a)?l.push(q({},r,p.ifnvl(t,!0))):u.remove(l,function(e){return u.keys(e)[0]===r}),this.setState((q(n={},e,a),q(n,"setting",l),n))}},{key:"fullScreen",value:function(){var e=this.state.fullScreen;this.setState({fullScreen:!e,force:!0})}},{key:"dataView",value:function(){var e=this.state.dataView;this.setState({dataView:!e})}},{key:"download",value:function(){var e=this.props,t=e.title,n=void 0===t?"":t,a=e.downloadName;a=a||"".concat(n,"_").concat(+new Date),c.a.download(this._dataView.join("\n"),a+".csv")}},{key:"reload",value:function(){var e=this.props,t=e.setting,n=e.req,a=e.data;t=s.a.serialize(t),this.setState({req:n,data:a,setting:t,fullScreen:!1,xyExchange:!1,xAxisShowAll:!1,legendShow:!1,dataView:!1,lineBarExchange:!1})}},{key:"getResult",value:function(e,t){var n=this.props.result;this._dataView=u.get(t,"data._dataView"),n&&n(e,t)}},{key:"shouldComponentUpdate",value:function(e,t){e.children,e.append,e.chartClick;var n=O(e,["children","append","chartClick"]),a=this.props,r=(a.children,a.append,a.chartClick,O(a,["children","append","chartClick"]));return!!e.force||(!u.isEqual(n,r)||!u.isEqual(t,this.state))}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.style,r=e.className,o=e.h100,l=e.bodyStyle,s=e.border,d=e.showToolbar,m=e.transform,h=e.append,f=e.prepend,y=this.props,b=y.chartTypes,w=y.data,E=y.dataType,V=y.dataModel,O=this.props,M=O.options,T=O.renderType,_=O.theme,k=u.omit(this.props,"chartClick","chartDblClick","chartMouseDown","chartMouseUp","chartMouseOver","chartMouseOut","chartGlobalOut"),P=this.props,j=P.req,N=P.mrReq,C=void 0===N?{}:N;p.run(j,function(){C.req=j});C.transmit;var A=C.req,D=C.transform;C.force;A&&!D&&(D=function(e){if(e.length>1){var t=p.map(e,function(e){return e.data});return u.concat.apply(u,[[]].concat(x(t)))}return e});var R=this.state,X=R.fullScreen,F=R.dataView,B=R.setting,L={data:w,dataType:E,dataModel:V,chartTypes:b,setting:B=p.clone(B),options:M,renderType:T,theme:_,transform:m},I=c.a.cls(q({"mr-full-screen":X,"mr-echarts-panel":!0,"h-100-i":o},"mr-echarts-panel-tools-".concat(d),!0),r),z=this.props,K={showLoading:z.showLoading,showNodata:z.showNodata,nodata:z.nodata,loading:z.loading};return a.createElement(v.a,{title:t,extra:this.tools(),style:n,className:I,bodyStyle:l,append:h,prepend:f,border:s},a.createElement(S.a,Object.assign({req:A,data:{data:w},force:!0,transmit:"data"},K),F?a.createElement(g,{dataView:this._dataView}):a.createElement(i.a,Object.assign({},L,k,{className:"full-sreen-"+X,result:this.getResult.bind(this)}))))}}])&&T(n.prototype,r),o&&T(n,o),t}();j.defaultProps={showToolbar:"toggle",omitTools:[],force:!1};var N=j;try{j.displayName="MrEchartsPanel",j.__docgenInfo={description:"",displayName:"MrEchartsPanel",props:{chartTypes:{defaultValue:null,description:"chartTypes: string\n\u56fe\u6807\u7c7b\u578b\n@values \u53ef\u7531\u4e3b\u56fe\u8868\u7c7b\u578b + \u5b50\u56fe\u8868\u7c7b\u578b\u7ec4\u6210\uff0c exp. pie::rose::ring",name:"chartTypes",required:!0,type:{name:"string"}},setting:{defaultValue:null,description:"setting\n- \u5bf9options\u503c\u8fdb\u884c\u914d\u7f6e\u5904\u7406\n- plugin \u9488\u5bf9chartsType\u7684\u63d2\u4ef6\u6ce8\u518c\u65b9\u6848",name:"setting",required:!1,type:{name:"any"}},transform:{defaultValue:null,description:"\u5bf9data\u8fdb\u884c\u6570\u636e\u5904\u7406",name:"transform",required:!1,type:{name:"any"}},downloadName:{defaultValue:null,description:"",name:"downloadName",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"\u4f20\u5165\u6570\u636e(\u63a8\u8350):\n- \u4e0e options \u4e8c\u8005\u5b58\u5176\u4e00\uff1b",name:"data",required:!1,type:{name:"any"}},dataType:{defaultValue:null,description:"\u6570\u636e\u7c7b\u578b:\n- \u4ec5\u5728 data \u5b58\u5728\u65f6\u751f\u6548",name:"dataType",required:!1,type:{name:"any"}},dataModel:{defaultValue:null,description:"\u6570\u636e\u6a21\u578b:\n- \u4ec5\u5728 data \u5b58\u5728\u65f6\u751f\u6548",name:"dataModel",required:!1,type:{name:"any"}},req:{defaultValue:null,description:"",name:"req",required:!1,type:{name:"any"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},border:{defaultValue:null,description:"",name:"border",required:!1,type:{name:"any"}},bodyStyle:{defaultValue:null,description:"",name:"bodyStyle",required:!1,type:{name:"any"}},h100:{defaultValue:null,description:"",name:"h100",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},append:{defaultValue:null,description:"",name:"append",required:!1,type:{name:"any"}},prepend:{defaultValue:null,description:"",name:"prepend",required:!1,type:{name:"any"}},mrReq:{defaultValue:null,description:"mrReq?: MrReqProps\nMrReq \u90e8\u5206interface\n\nMrReq: any {\n    transmit;\n    transform;\n    ...\n}",name:"mrReq",required:!1,type:{name:"any"}},omitTools:{defaultValue:null,description:"omitTools?: string\n\u4ece\u5de5\u5177\u6761\u4e2d\u6458\u9664\u5de5\u5177\n@values \u82e5 omitTools === __all__, \u5219\u79fb\u9664\u5de5\u5177\u6761",name:"omitTools",required:!1,type:{name:"string | string[]"}},showToolbar:{defaultValue:{value:"toggle"},description:"showToolbar?: string = 'toggle'\n\u663e\u793a\u5de5\u5177\u6761\u7c7b\u578b\n@values toggle => \u9f20\u6807hover panel \u663e\u793a\nvisible => \u4e00\u76f4\u663e\u793a\nhide => \u4e0d\u663e\u793a",name:"showToolbar",required:!1,type:{name:"string"}},result:{defaultValue:null,description:"result?: function(options: EchartOption, result: any)\n\u56de\u8c03\u51fd\u6570\n@emit function\n@params result: {options: EchartOption, data: any, dataView: any}",name:"result",required:!1,type:{name:"any"}},force:{defaultValue:{value:"false"},description:"\u5f3a\u5236\u6e32\u67d3",name:"force",required:!1,type:{name:"boolean"}},showLoading:{defaultValue:null,description:"showLoading?: boolean = true\n@extend MrProcessProps",name:"showLoading",required:!1,type:{name:"boolean"}},showNodata:{defaultValue:null,description:"showNodata?: boolean = true\n@extend MrProcessProps",name:"showNodata",required:!1,type:{name:"boolean"}},loading:{defaultValue:null,description:"loading?: string | React.Component\n@extend MrProcessProps",name:"loading",required:!1,type:{name:"string | Component<{}, {}, any>"}},nodata:{defaultValue:null,description:"nodata?: React.Component\n@extend MrProcessProps",name:"nodata",required:!1,type:{name:"Component<{}, {}, any>"}},options:{defaultValue:null,description:"EchartOptions\n- \u4e0d\u662f\u63a8\u8350\u65b9\u6848\uff0cbut \u652f\u6301\u76f4\u63a5\u4f20\u9012EchartOptions\u751f\u6210\u56fe\u8868",name:"options",required:!1,type:{name:"any"}},theme:{defaultValue:{value:"'customed'"},description:"Echart \u4e3b\u9898\u65b9\u6848\n- \u9700\u8981\u5b9e\u73b0\u5f15\u5165",name:"theme",required:!1,type:{name:"string"}},renderType:{defaultValue:{value:"'canvas'"},description:"Echart \u6e32\u67d3\u7c7b\u578b\n- values: canvas, svg",name:"renderType",required:!1,type:{name:"string"}},_gene:{defaultValue:null,description:"\u9690\u85cf\u57fa\u56e0\u9057\u4f20\u5bf9\u8c61",name:"_gene",required:!1,type:{name:"any"}},chartClick:{defaultValue:null,description:"\u7ed1\u5b9a\u5173\u8054 Echarts \u4e8b\u4ef6\u65b9\u6cd5\n- \u70b9\u51fb",name:"chartClick",required:!1,type:{name:"Function"}},chartDblClick:{defaultValue:null,description:"- \u53cc\u51fb",name:"chartDblClick",required:!1,type:{name:"Function"}},chartMouseDown:{defaultValue:null,description:"- \u9f20\u6807\u4e0b\u6309",name:"chartMouseDown",required:!1,type:{name:"Function"}},chartMouseUp:{defaultValue:null,description:"",name:"chartMouseUp",required:!1,type:{name:"Function"}},chartMouseOver:{defaultValue:null,description:"",name:"chartMouseOver",required:!1,type:{name:"Function"}},chartMouseOut:{defaultValue:null,description:"",name:"chartMouseOut",required:!1,type:{name:"Function"}},chartGlobalOut:{defaultValue:null,description:"",name:"chartGlobalOut",required:!1,type:{name:"Function"}}}},"undefined"!==typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/lib/mr-echarts-panel/mr-echarts-panel.component.tsx#MrEchartsPanel"]={docgenInfo:j.__docgenInfo,name:"MrEchartsPanel",path:"src/lib/mr-echarts-panel/mr-echarts-panel.component.tsx#MrEchartsPanel"})}catch(e){}var C=n("./src/lib/mr-common/mr-resource.ts");function A(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}t.default=function(e){var t=e.components,n=A(e,["components"]);return r.a.createElement(o.MDXTag,{name:"wrapper",components:t},r.a.createElement(o.MDXTag,{name:"h1",components:t,props:{id:"mrechartspanel"}},r.a.createElement(o.MDXTag,{name:"a",components:t,parentName:"h1",props:{"aria-hidden":!0,href:"#mrechartspanel"}},r.a.createElement(o.MDXTag,{name:"span",components:t,parentName:"a",props:{className:"icon-link"}},"#")),"MrEchartsPanel"),r.a.createElement(o.MDXTag,{name:"p",components:t},"\u5b83\u662f\u4e00\u7ec4\u7ec4\u4ef6\u7684\u96c6\u5408\uff0c\u5176\u6700\u5927\u7279\u70b9\u662f\u6dfb\u52a0\u4e86\u4e00\u7ec4widgets\u5bf9Echarts\u56fe\u8868\u8fdb\u884c\u64cd\u4f5c"),r.a.createElement(o.MDXTag,{name:"ol",components:t},r.a.createElement(o.MDXTag,{name:"li",components:t,parentName:"ol"},r.a.createElement(l.Link,{to:"/mrt/mr-echarts"}," MrEcharts ")),r.a.createElement(o.MDXTag,{name:"li",components:t,parentName:"ol"},r.a.createElement(l.Link,{to:"/mrt/mr-req"}," MrReq ")),r.a.createElement(o.MDXTag,{name:"li",components:t,parentName:"ol"},r.a.createElement(l.Link,{to:"/mrt/mr-panel"}," MrPanel "))),r.a.createElement(o.MDXTag,{name:"h2",components:t,props:{id:"basic-usage"}},r.a.createElement(o.MDXTag,{name:"a",components:t,parentName:"h2",props:{"aria-hidden":!0,href:"#basic-usage"}},r.a.createElement(o.MDXTag,{name:"span",components:t,parentName:"a",props:{className:"icon-link"}},"#")),"Basic usage"),r.a.createElement(l.Playground,{__position:0,__code:"{() => {\n  let demo = MrResource.pool('/assets/pie.json')\n  let $pool = { demo }\n  // \u5c06$pool\u5b58\u50a8\u5230\u5168\u5c40\u914d\u7f6e\u4e2d\u4f9b\u7ed9MrReq\u8c03\u7528\n  MrServices.setResourcePool($pool)\n  let req = {\n    api: 'demo',\n    method: 'get',\n  }\n  return (\n    <MrEchartsPanel\n      title=\"MrEchartsPanel::pie\"\n      style={{ height: 300 }}\n      req={req}\n      chartTypes=\"pie::ring\"\n    />\n  )\n}}",__scope:{props:n,MrEchartsPanel:N,MrResource:C.a,MrServices:c.a}},function(){var e={demo:C.a.pool("/assets/pie.json")};c.a.setResourcePool(e);return r.a.createElement(N,{title:"MrEchartsPanel::pie",style:{height:300},req:{api:"demo",method:"get"},chartTypes:"pie::ring"})}),r.a.createElement(o.MDXTag,{name:"h2",components:t,props:{id:"properties"}},r.a.createElement(o.MDXTag,{name:"a",components:t,parentName:"h2",props:{"aria-hidden":!0,href:"#properties"}},r.a.createElement(o.MDXTag,{name:"span",components:t,parentName:"a",props:{className:"icon-link"}},"#")),"Properties"),r.a.createElement(l.PropsTable,{of:N}))}}}]);
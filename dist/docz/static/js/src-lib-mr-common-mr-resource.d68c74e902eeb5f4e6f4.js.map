{"version":3,"sources":["webpack:///./src/lib/mr-common/mr-request.ts","webpack:///./src/lib/mr-common/mr-resource.mdx","webpack:///./src/lib/mr-common/mr-resource.ts"],"names":["CancelToken","axios","responseHandler","response","rst","resultType","config","mock","data","_typeof","MrServices","Promise","resolve","errorHandler","err","isCancel","reject","headers","status","statusText","$message","error","self","_reqCatch","Object","prototype","toString","call","MrRequest","url","options","arguments","length","undefined","getHeaders","mu","map","item","extend","run","cancelToken","then","catch","mrrequest","displayName","__docgenInfo","description","props","STORYBOOK_REACT_CLASSES","docgenInfo","name","path","__react_docgen_typescript_loader_error","MDXContent","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","layout","React","Component","_this$props","components","_objectWithoutProperties","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","_mdx_js_tag__WEBPACK_IMPORTED_MODULE_1__","id","parentName","className","align","MrResource","mapping","params","_str$split2","_slicedToArray","replace","split","front","key","behind","value","isExist","ifnvl","join","sp","clone","restParams","ms","match","each","getParams","m","v","remove","fullUrl","search","restful","method","rest","Content-Type","restdata","vm","_url","get","post","args","Array","from","unshift","apply","upload","_","delete","patch","put","save","__primary__","download","responseType","downloadName","mrdown","console","__webpack_exports__"],"mappings":"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","file":"static/js/src-lib-mr-common-mr-resource.882c2c59.js","sourcesContent":["/**\n * MrRequest\n * 简单封装fetch\n *\n * @creator mizi.lin\n *\n * @update mizi.lin@v0.1.21.20180516\n * ::=> 修复 headers 不接受 function，不能获取最新值\n *\n * @update mizi.lin@v0.1.23,20180523\n * ::=> 移除 catch 时回调 responseHandler\n *\n * @update mizi.lin@v0.2.0.20180607\n * ::=> 使用 axios 替换 fetch （Loreal中国不知道为什么网关阻止 fetch.get 但允许 fetch.post)）\n * ::=> fetch@v0.1.27-b3\n *\n * @update mizi.lin@v0.2.0-b7.2o18o612\n * ::=> fixed bugs: catch error return value 没有判断是否为promise又外裹一层promise.reject\n *\n * @update mizi.lin@v1.0.3\n * :: => 取消ajax请求, 仅支持取消单条请求\n */\n\nimport MrServices from './mr.services';\nimport  mu from 'mzmu';\nimport axios, { AxiosResponse, AxiosRequestConfig } from 'axios';\n\n\nconst CancelToken = axios.CancelToken;\n\n// const source = CancelToken.source();\n\ninterface MrAxiosRequestConfig extends AxiosRequestConfig {\n    resultType: string;\n    mock: boolean;\n}\n\n/**\n * responseHandler(response: AxiosResponse)\n * @todo 编写文档的时候注明可以根据不同的resultType返回不同的类型\n * @param {AxiosResponse} response\n * @return {Promise<any>}\n */\nfunction responseHandler(response: AxiosResponse) {\n    let { resultType } = response.config as MrAxiosRequestConfig;\n    let { mock  } = response.config as MrAxiosRequestConfig;\n    let rst;\n\n    // @todo 编写文档的时候注明可以根据不同的resultType返回不同的类型\n    switch (resultType) {\n        case 'response':\n            rst = response;\n            break;\n        default:\n            rst = response.data;\n            break;\n    }\n\n    if(mock && typeof rst === 'object') {\n        rst = MrServices.mock(rst);\n    }\n\n    return Promise.resolve(rst);\n}\n\nfunction errorHandler(err) {\n\n    // 取消请求\n    if (axios.isCancel(err)) {\n        // let self = MrServices._reqCatch;\n        // if(self) {\n        //     err = self(err);\n        // }\n        //\n        // return Promise.reject(err);\n\n        /**\n         * 取消请求跳过全局配置中输出\n         * 只能在单个请求中配置catch信息\n         */\n        return Promise.reject(err);\n    } else {\n        const { response } = err;\n\n        if(!response) {\n           return Promise.reject(err)\n        }\n\n        // 设置reject, 表示该 catch 后，不再接受 then\n        let { headers, status, statusText, data } = response;\n\n        // 兼容fetch使用promise获得信息\n        let $message: any = new Promise((resolve) => resolve(data));\n\n        // 传递error信息\n        let error: any = {\n            headers,\n            status,\n            statusText,\n            data,\n            $message,\n            response,\n            error: err\n        };\n\n        let self = MrServices._reqCatch;\n        if (self) {\n            error = self(error);\n        }\n\n        return Object.prototype.toString.call(error) === '[object Promise]' ? error : Promise.reject(error);\n    }\n\n}\n\n/**\n * Requests a URL, returning a promise.\n *\n * @param  {string} url       The URL we want to request\n * @param  {object} [options] The options we want to pass to \"fetch\"\n * @return {object}           An object containing either \"data\" or \"err\"\n */\n\n// @todo 接收option自定义值，配置可接受参数，控制报错流程\nexport default function MrRequest(url, options: any = {}) {\n\n    let headers: any = MrServices.getHeaders();\n\n    headers = mu.map(headers || {}, (item) => {\n        return typeof item === 'function' ? item() : item;\n    });\n\n    options.headers = mu.extend(true, headers, options.headers);\n    options.url = url;\n\n    // v1.0.3\n    // add cancel request\n    mu.run(typeof options.cancelToken === 'function', () => {\n        options.cancelToken = new CancelToken(options.cancelToken);\n    });\n\n    return axios(options)\n    .then(responseHandler)\n    .catch(errorHandler);\n}\n\ntry {\n    // @ts-ignore\n    mrrequest.displayName = \"mrrequest\";\n    // @ts-ignore\n    mrrequest.__docgenInfo = { \"description\": \"Requests a URL, returning a promise.\\n@param url The URL we want to request\\n@param options The options we want to pass to \\\"fetch\\\"\\n@return An object containing either \\\"data\\\" or \\\"err\\\"\", \"displayName\": \"mrrequest\", \"props\": {} };\n    // @ts-ignore\n    if (typeof STORYBOOK_REACT_CLASSES !== \"undefined\")\n        // @ts-ignore\n        STORYBOOK_REACT_CLASSES[\"src/lib/mr-common/mr-request.ts#mrrequest\"] = { docgenInfo: mrrequest.__docgenInfo, name: \"mrrequest\", path: \"src/lib/mr-common/mr-request.ts#mrrequest\" };\n}\ncatch (__react_docgen_typescript_loader_error) { }","\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  import { Playground, PropsTable, PropType } from 'docz';\nimport MrResource from './mr-resource';\n\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}>\n<MDXTag name=\"h1\" components={components} props={{\"id\":\"mrresource\"}}>{`MrResource`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`基于MrRequest的RESEful接口请求协议`}</MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"basic-usage\"}}>{`Basic usage`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-javascript\"}}>{`    let pool = MrResource.pool(api: string);\n\n    /**\n     * 使用get方法向服务器请求api资源\n     * @params search: any: api 请求参数\n     * @params extraSearch: any: 额外请求参数，合并至 search\n     * @params options: MrRequestOptions fetch 请求options\n     * @return Promise\n     */\n\n    // pool.get(search)\n    // pool.get(search, extraSearch, options) 若要使用options, 请补全所有参数\n    pool.get(search: any, extraSearch?: any, options?: AxiosOptions): Promise;\n\n    /**\n     * 使用post方法向服务器请求api资源\n     * @params search: any: api 请求参数\n     * @params payload: any: body request payload\n     * @params options: MrRequestOptions fetch 请求options\n     * @return Promise\n     */\n\n    // pool.post(payload) 若只有一个参数，该参数默认为payload(data)\n    // pool.post(search, payload)\n    // 若要使用options, 请补全所有参数\n    pool.post(search: any, payload: any, options?: AxiosOptions): Promise;\n\n    /**\n     * mrdown, 向服务器器请求二进制资源，并按照 search.downloadName 设置的文件类型下载文件\n     * MRI 默认下载配置，默认post请求，并添加相应配置参数，若其他请使用 download\n     * @params search: any: api 请求参数（其中 downloadName 为必填）\n     * @params payload: any: body request payload\n     * @params options: MrRequestOptions fetch 请求options\n     * @return Promise\n     */\n    pool.mrdown(search: any, payload: any, options?: AxiosOptions): Promise;\n`}</MDXTag></MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-javascript\"}}>{`    // let \\$pool = MrResource.pool(api: string);\n    // api 路径接受动态参数配置, 依据RESUful语义解释\n\n    let \\$pool = MrResource.pool('/users{/:id}/works{/:name}');\n\n    // 参数为空\n    // api = /users/works\n    // RESUful 表述为: 所有用户的所有工作\n    \\$pool.get({});\n\n    // api = /users/1234/works\n    // RESUful 表述为: ID为1234的用户的所有工作\n    \\$pool.get({id: 1234});\n\n    // api = /users/1234/works/engineer\n    // RESUful 表述为: ID为1234的用户的工程师工作信息\n    \\$pool.get({id: 1234, name: 'engineer'});\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"占位符--使用方法\"}}>{`占位符 {} 使用方法`}</MDXTag>\n<MDXTag name=\"ol\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`占位符只支持属性占位，不支持索引值占位`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`':name:' 两个冒号间':'的name为当前匹配的属性值`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`':name' 若name为结尾，则可以省略最后面的冒号':'`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ol\">{`':' 冒号为区分属性值和占位值的标识符`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-javascript\"}}>{`// 下面例子为 api {} 占位符的等效表示\n\n'{user/:name}' === \\`user/\\${name}\\`;\n\n'{user:name}' === \\`user\\${name}\\`;\n\n'{:name}' === \\`\\${name}\\`;\n\n'{:name:/}' === \\`\\${name}/\\`;\n\n// 注意下列是不等于\n// 所有的属性值表示前面必须加冒号 ':'\n\n'{name}' !== \\`\\${name}\\`;\n\n'{name:/info}' !== \\`\\${name}/info\\`;\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"取消请求（cancel\"}}>{`取消请求（cancel)`}</MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`目前仅支持取消一个请求信息`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-javascript\"}}>{`// 取消 ajax 请求例子\n\nconst cancel;\n\n\\$pool.nodata.get({}, {}, {\n    cancelToken: (c) => (cancel = c)\n}).then(() => {\n}).catch((error) => {\n    console.debug(error);\n});\n\n// 取消请求\n// cancel(message?: any): message 非必须\nlet rst = cancel('cancel ajax');\n\n// rst 为 Cancel对象时，取消请求成功\n// rst 为 undefined时，ajax请求已触发成功\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"properties\"}}>{`Properties`}</MDXTag>\n<MDXTag name=\"table\" components={components}>\n<MDXTag name=\"thead\" components={components} parentName=\"table\">\n<MDXTag name=\"tr\" components={components} parentName=\"thead\">\n<MDXTag name=\"th\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`Property`}</MDXTag>\n<MDXTag name=\"th\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`type`}</MDXTag>\n<MDXTag name=\"th\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`Description`}</MDXTag>\n</MDXTag>\n</MDXTag>\n<MDXTag name=\"tbody\" components={components} parentName=\"table\">\n<MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`MrResource.pool(api: string)`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`mrpool`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`返回一个基于一个MrResource的一个连接池`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`mrpool.get(search?: object, params: object, options?: AxiosOptions)`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`Promise\\<any`}{`>`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`发起一个get请求，返回一个Promise对象 - Content-Type ='application/json';`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`mrpool.post(search?: object, payload: object, options?: AxiosOptions)`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`Promise\\<any`}{`>`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`发起一个post请求，返回一个Promise对象 - Content-Type ='application/json';`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`mrpool.upload(search?: object, payload: object, options?: AxiosOptions)`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`Promise\\<any`}{`>`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`发起一个post请求，返回一个Promise对象, - Content-Type ='multipart/form-data';`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`mrpool.download(search?: object, params: object, options?: AxiosOptions)`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`Promise\\<any`}{`>`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`发起一个get请求，返回一个Promise对象, 并自动下载 - Content-Type ='application/json';`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"tr\" components={components} parentName=\"tbody\">\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`mrpool.mrdown(search?: object, payload: object, options?: AxiosOptions)`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`Promise\\<any`}{`>`}</MDXTag>\n<MDXTag name=\"td\" components={components} parentName=\"tr\" props={{\"align\":\"left\"}}>{`基于mri协议，发起一个post请求，返回一个Promise对象, 并自动下载 - Content-Type ='application/json';`}</MDXTag>\n</MDXTag>\n</MDXTag>\n</MDXTag>\n           </MDXTag>\n  }\n}\n  ","/**\n * MrResource\n * 基于restful的实现方案\n *\n * @create mizi.lin\n *\n * @update mizi.lin@v0.1.23.v20180522\n * ::=> fixed delete no search\n * ::=> 添加 upload 接口\n *\n * @update mizi.lin@0.1.27-b1.2018o6o6\n * ::=> clear UrlSearchParams\n * ::=> method.get 添加默认 ContentType\n *\n * @update mizi.lin@0.2.1-b10.2o18o621\n * ::=> fixed bugs: mrdown no download then add axios.options.responseType: blob\n */\n\nimport mu from 'mzmu';\nimport MrRequest from './mr-request';\nimport MrServices from './mr.services';\nimport * as _ from 'lodash';\n\n// HTTP协议中请求的8中方法\n//\n// OPTIONS获取服务器支持的HTTP请求方法；\n// HEAD跟get很像，但是不返回响应体信息，用于检查对象是否存在，并获取包含在响应消息头中的信息。\n// GET向特定的资源发出请求，得到资源。\n// POST向指定资源提交数据进行处理的请求，用于添加新的内容。\n// PUT向指定资源位置上传其最新的内容，用于修改某个内容。\n// DELETE请求服务器删除请求的URI所标识的资源，用于删除。\n// TRACE回馈服务器收到的请求，用于远程诊断服务器。\n// CONNECT用于代理进行传输，如使用ssl\n\nclass MrResource {\n\n    private getParams(mapping: string = '', params: object = {}): any {\n        let str: string = mapping.replace(/^{(.*)}$/, '$1');\n        let [front, key, behind] = str.split(':');\n        let value = params[key];\n        if (mu.isExist(value)) {\n            front = mu.ifnvl(front, '');\n            behind = mu.ifnvl(behind, '');\n            value = [front, value, behind].join('');\n        }\n        value = mu.ifnvl(value, '');\n\n        return {\n            key,\n            value\n        }\n    }\n\n    /**\n     * URL to REST_URL\n     * @param url\n     * @param params\n     * @param options\n     */\n    private restful(url: string, params: any = {}, options: any = {}): any {\n        let fullUrl: string;\n\n        url = url || '';\n        let sp: any = mu.clone(params || {});\n        const restParams: any = {};\n\n        // support {/:id}\n        let ms = url.match(/{(.*?)(:.+?)}/g);\n\n        if (ms && ms.length) {\n            mu.each(ms, (item) => {\n                let mapping = this.getParams(item, params);\n                if (mapping.key) {\n                    options['holdParams'] || delete params[mapping.key];\n                    url = url.replace(item, mapping.value);\n                }\n            })\n        }\n\n        // 向下兼容直接使用 {key} 来做替换数据\n        // 0.2.22 以下\n        url = url.replace(/\\{(.+?)\\}/g, (m: string, key: string) => {\n            let value =  mu.run(sp[key], (v: string) => {\n                restParams[key] = v;\n                sp = mu.remove(sp, key);\n                options['holdParams'] || delete params[key];\n                return v;\n            });\n\n            return mu.ifnvl(value, '');\n        });\n\n        return {\n            url: url,\n            fullUrl: fullUrl || url,\n            search: sp,\n            params,\n            restParams: restParams\n        };\n    }\n\n    get(url: string, search?: any, options?: any) {\n        const rest = this.restful(url, search, options);\n        let fullUrl = rest.fullUrl;\n\n        options = mu.extend(true, {\n            method: 'get',\n            params: search,\n        }, options || {});\n\n        return MrRequest(fullUrl, options);\n    }\n\n    post(url: string, search?: any, data?: any, options?: any) {\n\n        switch (arguments.length) {\n            case 1:\n                data = {};\n                search = {};\n                options = {};\n                break;\n            case 2:\n                data = arguments[1];\n                search = {};\n                options = {};\n                break;\n            case 3:\n                options = {};\n                break;\n        }\n\n        const rest = this.restful(url, search, options);\n        let headers: any = MrServices.getHeaders();\n        // const restdata = this.restful(rest.url, data, true);\n\n        options = mu.extend(true, {\n            method: 'post',\n            // credentials: 'include',\n            headers: {\n                'Content-Type': 'application/json;',\n                // 'Accept': 'application/json;'\n            },\n            // fetch\n            // body: JSON.stringify(data)\n            data,\n            params: search\n        }, options || {});\n\n        return MrRequest(rest.fullUrl, options);\n    }\n\n    patch(url: string, search?: any, data?: any, options?: any) {\n        switch (arguments.length) {\n            case 1:\n                search = {};\n                data = {};\n                options = {};\n                break;\n            case 2:\n                search = {};\n                data = arguments[1];\n                options = {};\n                break;\n            case 3:\n                options = {};\n                break;\n        }\n\n        const rest = this.restful(url, search, options);\n        const restdata = this.restful(rest.url, data, options);\n\n        options = mu.extend(true, {\n            method: 'patch',\n            // body: JSON.stringify(data),\n            headers: {\n                'Content-Type': 'application/json;'\n            },\n            data,\n            params: search\n        }, options || {});\n\n        return MrRequest(restdata.fullUrl, options);\n    }\n\n    put(url: string, search?: any, data?: any, options?: any) {\n        switch (arguments.length) {\n            case 1:\n                search = {};\n                data = {};\n                options = {};\n                break;\n            case 2:\n                search = {};\n                data = arguments[1];\n                options = {};\n                break;\n            case 3:\n                options = {};\n                break;\n        }\n\n        const rest = this.restful(url, search, options);\n        const restdata = this.restful(rest.url, data, options);\n\n        options = mu.extend(true, {\n            method: 'put',\n            headers: {\n                'Content-Type': 'application/json;'\n            },\n            data,\n            params: search\n        }, options || {});\n\n        return MrRequest(restdata.fullUrl, options);\n    }\n\n    delete(url: string, search?: any, options?: any) {\n\n        const rest = this.restful(url, search, options);\n        let fullUrl = rest.fullUrl;\n\n        options = mu.extend(true, {\n            method: 'delete',\n            params: search,\n        }, options || {});\n\n        return MrRequest(fullUrl, options);\n    }\n\n    pool(url: string) {\n        const vm = this;\n        return {\n\n            _url: url,\n\n            // hack, 支持三参数 与 post 等模式调用方式一致\n            // 提高判断method时，提交使用效率\n            get(search?: any, params?: any, options?: any) {\n\n                mu.run(params, () => {\n                    search = mu.extend(true, search, params);\n                });\n\n                return vm.get(url, search, options);\n            },\n\n            post(search?: any, data?: any, options?: any) {\n                const args: any = Array.from(arguments);\n                args.unshift(url);\n                return vm.post.apply(vm, args);\n            },\n\n            upload(search?: any, data?: any, options?: any) {\n                options = options || {};\n                _.set(options, 'headers.Content-Type', 'multipart/form-data;');\n                return vm.post(url, search, data, options);\n            },\n\n            delete(search?: any, data?: any, options?: any) {\n                const args: any = Array.from(arguments);\n                args.unshift(url);\n                return vm.delete.apply(vm, args);\n            },\n\n            patch(search?: any, data?: any, options?: any) {\n                const args: any = Array.from(arguments);\n                args.unshift(url);\n                return vm.patch.apply(vm, args);\n            },\n\n            put(search?: any, data?: any, options?: any) {\n                const args: any = Array.from(arguments);\n                args.unshift(url);\n                return vm.put.apply(vm, args);\n            },\n\n            save(search?: any, data?: any, options?: any) {\n                const primaryKey = (search || data || {}).__primary__;\n                const method = (search || data || {})[primaryKey] ? 'patch' : 'post';\n                const args: any = Array.from(arguments);\n                args.unshift(url);\n                return vm[method].apply(vm, args);\n            },\n\n            download(search: any, options?: any) {\n                const args: any = Array.from(arguments);\n                options = options || {};\n                options.responseType = 'blob';\n                args.unshift(url);\n                return vm.get.apply(vm, args).then((rst) => {\n                    MrServices.download(rst, search.downloadName);\n                });\n            },\n\n            mrdown(search: any, data?: any, options?: any) {\n                search = search || {};\n                data = data || {};\n                options = options || {};\n                if (!search.downloadName) {\n                    console.error('downloadName 未设置');\n                    return false;\n                }\n                search['directDownload'] = true;\n                options['responseType'] = 'blob';\n                return vm.post(url, search, data, options).then((rst) => {\n                    MrServices.download(rst, search.downloadName);\n                });\n            }\n        }\n    }\n\n}\n\nexport default new MrResource();"],"sourceRoot":""}
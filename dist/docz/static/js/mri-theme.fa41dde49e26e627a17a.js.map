{"version":3,"sources":["webpack:///./mri/theme.mdx"],"names":["MDXContent","props","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","layout","React","Component","_this$props","components","_objectWithoutProperties","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","_mdx_js_tag__WEBPACK_IMPORTED_MODULE_1__","name","id","parentName","className","href"],"mappings":"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","file":"static/js/mri-theme.4359fbea.js","sourcesContent":["\n  import React from 'react'\n  import { MDXTag } from '@mdx-js/tag'\n  \n\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}><MDXTag name=\"h1\" components={components} props={{\"id\":\"theme\"}}>{`theme`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`MRI最核心的概念之一`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`每个theme都要可以单独发布成一个app发布；`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`也可以将多个theme组合成一个新的theme发布；`}</MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"创建\"}}>{`创建`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-bash\"}}>{`// 新建\n\\$ mri theme themeName\n\n// 启动\n\\$ mri dev themeName\n\n// 发布测试\n\\$ mri build themeName\n\n// 发布生产\n\\$ mri prod themeName\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"组成\"}}>{`组成`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`+ \\${theme}/\n    // 常见开发三种环境的配置文件\n    + env/\n        - \\${theme}-dev-cont.ts\n        - \\${theme}-test-cont.ts\n        - \\${theme}-prod-cont.ts\n\n    // umirc.js, mrirc.js 的配置信息\n    - \\${theme}-config.js\n    // dva 的启动文件\n    - \\${theme}-dva.ts\n    // 单theme的路由守卫，是全局路由守卫的补充\n    - \\${theme}-route-guard.ts\n    // \\${theme} 路由配置文件\n    - \\${theme}-routes.ts\n    // umijs 和 mri-cli 的相关配置信息\n    - \\${theme}-umi.js\n    // 配置预加载数据\n    - \\${theme}-preload.ts\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"env\"}}>{`env`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`MRI 预设三种环境：`}</MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`dev: 开发环境`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`test: 测试环境`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`prod: 生产环境`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"p\" components={components}>{`三种环境可能会有一些参数变量，在不同环境中有着不同的表现， 如`}</MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`测试账号`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`是否打开debug模式`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`是否打印调试信息\n— API连接地址`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`错误信息输出度`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`umijs 或 mri 相关参数等`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"p\" components={components}>{`env 常量 会与 const 数据合并进行调用(env > const)`}</MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"configjs\"}}>{`config.js`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`包含 umirc.js, mrirc.js 的配置 和 mri-cli的环境变量配置；`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`每个theme都有可能有自己单独的配置，在这里可以配置针对该theme的单独配置；`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`// social.config.js\nmodule.exports = {\n\n    // 配置umirc 的代理服务\n    proxy: {\n        '/services': {\n            target: 'http://58.215.174.164:16800/',\n            changeOrigin: true,\n            pathRewrite: {'^/services': ''}\n        }\n    },\n\n    // 配置 mri-cli 的环境变量\n    mri: {\n        theme: 'social',\n        PORT: '6001'\n    }\n};\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"theme-configts\"}}>{`theme-config.ts`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`theme 的主配置文件；`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`与 config.js 不同的是：`}</MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`config.js 针对的是当前执行环境(UMIJS, MRI-CLI)`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`theme-config.ts 针对的当前开发环境(MRI)`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`// social-config.ts\nclass SocialThemeConfig  {\n    /**\n     * theme name\n     * 主题名称\n     * @type {string}\n     */\n    name = 'social';\n\n    /**\n     * website name\n     * 网站名称\n     */\n    website = 'Social X';\n\n    /**\n     * base layout\n     * 基本布局\n     */\n    layout = SocialLayout;\n\n    /**\n     * routes config\n     * 路由配置\n     */\n    routes = SocialRoutes;\n\n    /**\n     * providers\n     */\n    providers = {\n        SocialConst: {...SocialConst, ...EnvConst},\n        SocialServices\n    };\n\n    /**\n     * derive\n     * 是否由其他项目派生出来\n     */\n    extra = {\n        showLogout: true\n    };\n\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"routests\"}}>{`routes.ts`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`routes 是与 umi 的 pages 相对应的;`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`它负责整个theme的路由，layout，权限 等`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`IRoutes = {\n    // module: 当前模块的名称，不可重复\n    [module: string]: {\n\n        // component: 当前路由调用的主组件\n        component: React.Component;\n\n        // path: 当前路由的路径，可多个\n        path?: string[],\n\n        // token: 当前路由是否需要token, 即是否需要用户身份权限\n        token: boolean,\n\n        // layout: 布局layout\n        // 若设置该layout, 则替换theme-config配置的主layout\n        // 如不不设置，则默认使用theme-config配置的layout\n        layout?: React.Component,\n\n        // subLayout: 子布局框架\n        // 即在layout的content之上, 再画一层布局\n        subLayout?: React.Component,\n\n        // src: 该component曾属于哪个theme\n        // 即 继承样式(如果不配置，则针对源theme配置的样式失效)\n        src: string\n    }\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"dvats\"}}>{`dva.ts`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://github.com/dvajs/dva\"}}>{`DVA`}</MDXTag>{` 配置文件, 利用它在系统启动之后，component 执行之前启动的原理，`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`暂时将 MRI 的 preset 的东西放在此处；`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"strong\" components={components} parentName=\"p\">{` TODO `}</MDXTag>{` 它最终将被替换；`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-js\"}}>{`// 这是一个例子\n\nimport \\$theme from '..';\nimport { MrServices } from 'masterrt';\nimport  mu from 'mzmu';\nimport { \\$pool, \\$utils, \\$intl } from '../../services';\n\nexport default function config() {\n    let MriDocConst = \\$theme.getProviders('MriDocConst');\n\n    MrServices.setHeaders({\n        'X-TOKEN': () => mu.storage(MriDocConst.STORAGE_X_TOKEN) || '',\n        'X-LANG': () => mu.storage(MriDocConst.STORAGE_LOCALE) || MriDocConst.LOCALE,\n        'X-ORIGIN': MriDocConst['X-ORIGIN']\n    });\n\n    MrServices.setResourcePool(\\$pool);\n\n    return {\n        onError(err) {\n            // message.error(err.message);\n            err.preventDefault();\n        },\n\n        initialState: {\n            global: {\n                text: 'hi mri'\n            }\n        }\n    };\n}\n`}</MDXTag></MDXTag>\n<MDXTag name=\"h3\" components={components} props={{\"id\":\"theme-preloadts\"}}>{`\\${theme}-preload.ts`}</MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`各theme设置preload，预加载数据`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`在module.token(登录状态)时，系统预加载user信息`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{}}>{`export default (module) => {\n\n    // ...\n    // 预加载数据在此处理，可存储值 StoreServices\n    // 并将promise放置与 promise.all\n\n    let \\$\\$test = \\$pool.test.get({});\n\n    \\$\\$test.then((result) => {\n        // 处理数据\n        // 将信息存储至 StoreServices\n        StoreServices.setValue('TEST', result);\n    })\n\n    return Promise.all([\\$\\$test]);\n\n}\n`}</MDXTag></MDXTag>\n           </MDXTag>\n  }\n}\n  "],"sourceRoot":""}